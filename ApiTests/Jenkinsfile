pipeline {
	agent any
	tools {
	    maven 'maven jenkins'
	    allure 'Allure'
        jdk 'JDK_11'
    }


	stages {
	    stage ('Build') {
                steps {
                    sh '''
                    cd ApiTests
                    mvn clean compile
                    '''
                }
            }
		stage ('Api Tests') {
            steps {
                sh '''
                cd ApiTests
                mvn test
                '''
            }
        }

             stage('Reports') {
                steps {
                   allure([
              	   includeProperties: false,
              	   jdk: '',
              	   properties: [],
              	   reportBuildPolicy: 'ALWAYS',
              	   results: [[path: 'target/allure-results']]
            	   ])
          	        }
                 }
	}
}
